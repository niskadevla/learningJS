<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Learning JS | Lessons 17-21</title>
  <script src="js/lessons_JS.js">
  </script>
</head>
<body>


  <h1>2.17. Функции</h1>
  <h3>Task 2.17.1: </h3>
  <pre>
    Для возврата значения используется директива return.
  </pre>
  <h3>Решение</h3>
  <pre>
    function checkAge(age) {
      if (age > 18) {
        return true;
      }
      else {
        return confirm('Parents allowd?')
      }
    }

    var age = 17; //prompt('How old are you?')

    if (checkAge(age)) {
      document.write('Access allowed');
    } else {
      document.write('Access denied!');
    }

    function showMovie(age) {
      if (!checkAge(age)) {
        return;
      }

      alert("Film ne dlya vseh"); //Не выведется никогда
    }
  </pre>
  <script type="text/javascript">
    function checkAge(age) {
      if (age > 18) {
        return true;
      }
      else {
        return confirm('Parents allowd?')
      }
    }

    var age = 17; //prompt('How old are you?')

    if (checkAge(age)) {
      document.write('Access allowed');
    } else {
      document.write('Access denied!');
    }

    function showMovie(age) {
      if (!checkAge(age)) {
        return;
      }

      alert("Film ne dlya vseh"); //Не выведется никогда
    }
  </script>


  <h3>Task 2.17.2: </h3>
  <pre>
    Перепишите функцию, используя оператор '?' или '||'
    Следующая функция возвращает true, если параметр age больше 18.
    В ином случае она задаёт вопрос confirm и возвращает его результат.

    function checkAge2(age) {
      if (age > 18) {
        return true;
      } else {
        return confirm('Родители разрешили?');
      }
    }

    Перепишите функцию, чтобы она делала то же самое, но без if, в одну строку.
    Сделайте два варианта функции checkAge:

        Используя оператор '?'
        Используя оператор ||

  </pre>
  <h3>Решение</h3>
  <pre>
    function checkAge2(age) {
      return (age > 18) ? true : document.write('Родители разрешили?');
    }

  /*  function checkAge2(age) {
      return (age > 18) || confirm('Родители разрешили?');

    }  */
    checkAge2(3);
  </pre>
  <script type="text/javascript">
    function checkAge2(age) {
      return (age > 18) ? true : document.write('Родители разрешили?');
    }

  /*  function checkAge2(age) {
      return (age > 18) || confirm('Родители разрешили?');

    }  */
    checkAge2(3);
  </script>



  <h3>Task 2.17.3: </h3>
  <pre>
    Функция min
    Задача «Hello World» для функций :)

    Напишите функцию min(a,b), которая возвращает меньшее из чисел a,b.

    Пример вызовов:

    min(2, 5) == 2
    min(3, -1) == -1
    min(1, 1) == 1
  </pre>
  <h3>Решение</h3>
  <pre>
    document.write(min(1, -1));
    /*
    function min(a,b) {
      if (a < b) {
        return a;
      }
      else {
        return b;
      }
    } */

    function min(a,b) {
      return (a < b) ? a : b;
    }

  </pre>
  <script type="text/javascript">
    document.write(min(-5, -1));
    /* function min(a,b) {
      if (a < b) {
        return a;
      }
      else {
        return b;
      }
    } */

    function min(a,b) {
      return (a < b) ? a : b;
    }

  </script><h3>Task 2.17.4: </h3>
  <pre>
    Функция pow(x,n)
    Напишите функцию pow(x,n), которая возвращает x в степени n. Иначе говоря, умножает x на себя n раз и возвращает результат.

    pow(3, 2) = 3 * 3 = 9
    pow(3, 3) = 3 * 3 * 3 = 27
    pow(1, 100) = 1 * 1 * ...*1 = 1

    Создайте страницу, которая запрашивает x и n, а затем выводит результат pow(x,n).
    Запустить демо

    P.S. В этой задаче функция обязана поддерживать только натуральные значения n,
    т.е. целые от 1 и выше.
  </pre>
  <h3>Решение</h3>
  <pre>
    My Solution:
    var x = prompt('Enter X', '');
    var n = prompt('Enter N', '');
    pow(x, n);
    function pow(x, n) {
      var res = 1;
      for (var i = 1; i <= n; i++) {
        res = res * x;
      }
      alert(res);
    }


    It's not my solution:
    function pow(x, n) {
      var res = x;
      for (var i = 1; i < n; i++) {
        res *= x;
      }
      return res;
    }

    var x = prompt('Enter X', '');
    var n = prompt('Enter N', '');
    if (n <= 1) {
      alert('Степень ' + n + ' не поддерживается');
    }
    else {
      alert( pow(x, n) );
    }
  </pre>
  <script type="text/javascript">
    /*
    function pow(x, n) {
      var res = x;
      for (var i = 1; i < n; i++) {
        res *= x;
      }
      return res;
    }

    var x = prompt('Enter X', '');
    var n = prompt('Enter N', '');
    if (n <= 1) {
      alert('Степень ' + n + ' не поддерживается');
    }
    else {
      alert( pow(x, n) );
    }
*/
  </script>


  <h1>2.18. Функциональные выражения</h1>
  <h3>Task 2.18.1: </h3>
  <pre>

  </pre>
  <h3>Решение</h3>
  <pre>
    function sayHi() {
      alert("Hello");
    }
    document.write(sayHi);
  </pre>
  <script type="text/javascript">
    function sayHi() {
      alert("Hello");
    }
    document.write(sayHi);
  </script>


  <h3>Task 2.18.2: </h3>
  <pre>
    Какая сработает первая или вторая?
  </pre>
  <h3>Решение</h3>
  <pre>
    'use strict';
    var age = 18;
    var sayHi2;
    if (age >= 18 ) {
      sayHi2 = function() {
        document.write('Wellcome! '); //Не срабоатет
      }
    }
    else {
      sayHi2 = function() {
        document.write('Access denied!'); //Не срабоатет
      }
    }

    sayHi2();

    var age3 = 14;
    if (age3 >= 18) {
      function sayHi3() {
        alert('Wellcome');
      }
    }
    else {
      function sayHi3() {
        alert("Access denied...");
      }
    }

    sayHi3();
  </pre>
  <script type="text/javascript">
    'use strict';
    var age = 18;
    var sayHi2;
    if (age >= 18 ) {
      sayHi2 = function() {
        document.write('Wellcome!');
      }
    }
    else {
      sayHi2 = function() {
        document.write('Access denied!');
      }
    }

    sayHi2();

    var age3 = 14;
    if (age3 >= 18) {
      function sayHi3() {
        alert('Wellcome'); //Не срабоатет
      }
    }
    else {
      function sayHi3() {
        alert("Access denied..."); //Не срабоатет
      }
    }

    sayHi3(); //Не срабоатет
  </script>


  <h3>Task 2.18.3: </h3>
  <pre>
    function a() {
      console.log('function')
      }
      var b = a;
      a = 5;
      b();

Что будет выведено в консоль?
  </pre>
  <h3>Решение</h3>
  <pre>
    function a() {
      document.write('function');
    }
    var b = a;
    a = 5;
    b();
  </pre>
  <script type="text/javascript">
    function a() {
      document.write('function');
    }
    // a = 5;
    var b = a;
    a = 5;
    b();
  </script>



  <h1>2.19. Рекурсия, стек</h1>
  <h3>Task 2.19.1: </h3>
  <pre>
    Вычислить сумму чисел до данного
    Напишите функцию sumTo(n), которая для данного n вычисляет сумму чисел от 1 до n, например:

    sumTo(1) = 1
    sumTo(2) = 2 + 1 = 3
    sumTo(3) = 3 + 2 + 1 = 6
    sumTo(4) = 4 + 3 + 2 + 1 = 10
    ...
    sumTo(100) = 100 + 99 + ... + 2 + 1 = 5050

    Сделайте три варианта решения:

        С использованием цикла.
        Через рекурсию, т.к. sumTo(n) = n + sumTo(n-1) для n > 1.
        С использованием формулы для суммы арифметической прогрессии.

    Пример работы вашей функции:

    function sumTo(n) { /*... ваш код ... */ }

    alert( sumTo(100) ); // 5050

    Какой вариант решения самый быстрый? Самый медленный? Почему?

    Можно ли при помощи рекурсии посчитать sumTo(100000)? Если нет, то почему?
  </pre>
  <h3>Решение</h3>
  <pre>
    <b>My solution: </b>
    function sumTo_1(n) {
      var res = n;
      for (var i = n-1; i >= 1; i--) {
        res += i;
      }
      return res;
    }

    function sumTo_2(n) {
      if (n > 1) {
        return (n + sumTo_2(n-1));
      }
      else return n;
    }

    function sumTo_3(n) {
      var d = 1, res = n;
      res = ( (2*1 + d*(n-1))/2 )*n;
      return res;
    }

    document.write(sumTo_1(3));
    document.write('< br />');
    document.write(sumTo_2(10000));
    document.write('< br />');
    document.write(sumTo_3(2));

    <b>Not my solution:</b>
    Решение с использованием цикла:

function sumTo(n) {
  var sum = 0;
  for (var i = 1; i <= n; i++) {
    sum += i;
  }
  return sum;
}

alert( sumTo(100) );

Решение через рекурсию:

function sumTo(n) {
  if (n == 1) return 1;
  return n + sumTo(n - 1);
}

alert( sumTo(100) );

Решение по формуле: sumTo(n) = n*(n+1)/2:

function sumTo(n) {
  return n * (n + 1) / 2;
}

alert( sumTo(100) );

P.S. Надо ли говорить, что решение по формуле работает быстрее всех? Это очевидно.
Оно использует всего три операции для любого n,
а цикл и рекурсия требуют как минимум n операций сложения.

Вариант с циклом – второй по скорости. Он быстрее рекурсии,
так как операций сложения столько же, но нет дополнительных вычислительных затрат
на организацию вложенных вызовов.

Рекурсия в данном случае работает медленнее всех.

  </pre>
  <script type="text/javascript">
    function sumTo_1(n) {
      var res = n;
      for (var i = n-1; i >= 1; i--) {
        res += i;
      }
      return res;
    }

    function sumTo_2(n) {
      if (n > 1) {
        return (n + sumTo_2(n-1));
      }
      else return n;
    }

    function sumTo_3(n) {
      var d = 1, res = n;
      res = ( (2*1 + d*(n-1))/2 )*n;
      return res;
    }


    document.write(sumTo_1(3));
    document.write('<br />');
    document.write(sumTo_2(10000));
    document.write('<br />');
    document.write(sumTo_3(2));
    document.write('<br />');
  </script>



  <h3>Task 2.19.2: </h3>
  <pre>
    Вычислить факториал
    Факториа́л числа – это число, умноженное на «себя минус один», затем на «себя минус два» и так далее, до единицы. Обозначается n!

    Определение факториала можно записать как:

    n! = n * (n - 1) * (n - 2) * ...*1

    Примеры значений для разных n:

    1! = 1
    2! = 2 * 1 = 2
    3! = 3 * 2 * 1 = 6
    4! = 4 * 3 * 2 * 1 = 24
    5! = 5 * 4 * 3 * 2 * 1 = 120

    Задача – написать функцию factorial(n), которая возвращает факториал числа n!, используя рекурсивный вызов.

    alert( factorial(5) ); // 120

    Подсказка: обратите внимание, что n! можно записать как n * (n-1)!. Например: 3! = 3*2! = 3*2*1! = 6
  </pre>
  <h3>Решение</h3>
  <pre>
    <b>My solution:</b>
    function factorial(n) {
      if (n == 1 || n == 0) return 1;
      return n * factorial(n - 1);
    }

    document.write(factorial(5));
    document.write('< br />');

    <b>Not my solution</b>
    function factorial(n) {
  return (n != 1) ? n * factorial(n - 1) : 1;
}

alert( factorial(5) ); // 120

Базисом рекурсии является значение 1. А можно было бы сделать базисом и 0. Тогда код станет чуть короче:

function factorial(n) {
  return n ? n * factorial(n - 1) : 1;
}

alert( factorial(5) ); // 120

В этом случае вызов factorial(1) сведётся к 1*factorial(0), будет дополнительный шаг рекурсии.
  </pre>
  <script type="text/javascript">
    function factorial(n) {
      if (n == 1 || n == 0) return 1;
      return n * factorial(n - 1);
    }

    document.write(factorial(5));
    document.write('<br />');

  </script>



  <h3>Task 2.19.3: </h3>
  <pre>
    Числа Фибоначчи

    Последовательность чисел Фибоначчи имеет формулу Fn = Fn-1 + Fn-2. То есть, следующее число получается как сумма двух предыдущих.

    Первые два числа равны 1, затем 2(1+1), затем 3(1+2), 5(2+3) и так далее: 1, 1, 2, 3, 5, 8, 13, 21....

    Числа Фибоначчи тесно связаны с золотым сечением и множеством природных явлений вокруг нас.

    Напишите функцию fib(n), которая возвращает n-е число Фибоначчи. Пример работы:

    function fib(n) { /* ваш код */ }

    alert( fib(3) ); // 2
    alert( fib(7) ); // 13
    alert( fib(77)); // 5527939700884757

    Все запуски функций из примера выше должны срабатывать быстро.
  </pre>
  <h3>Решение</h3>
  <pre>
    <b>My solution:</b>
    function fib_1(n) {
      return (n >= 2) ? (fib(n-1)+fib(n-2)) : n;
    }

    function fib_2(n) {
      var res = 0, res_1 = 0, res_2 = 1;
      if (n == 0) return 0;
      else if (n == 1) return 1;
      else if (n >= 2) {
        for (var i = 2; i <= n; i++) {
          res = res_1 + res_2;
          res_1 = res_2;
          res_2 = res;
        }
        return res;
      }
    }
    document.write('Answer: ');
    document.write( fib_2(3) + " | " );
    document.write( fib_2(7) + " | " );
    document.write( fib_2(77) );

    <b>Not my solution</b>
    Код для вычисления в цикле

    function fib(n) {
    var a = 1,
      b = 1;
    for (var i = 3; i <= n; i++) {
      var c = a + b;
      a = b;
      b = c;
    }
    return b;
    }

    alert( fib(3) ); // 2
    alert( fib(7) ); // 13
    alert( fib(77) ); // 5527939700884757
  </pre>
  <script type="text/javascript">
    function fib_1(n) {
      return (n >= 2) ? (fib(n-1)+fib(n-2)) : n;
    }

    function fib_2(n) {
      var res = 0, res_1 = 0, res_2 = 1;
      if (n == 0) return 0;
      else if (n == 1) return 1;
      else if (n >= 2) {
        for (var i = 2; i <= n; i++) {
          res = res_1 + res_2;
          res_1 = res_2;
          res_2 = res;
        }
        return res;
      }
    }
    document.write('Answer: ');
    document.write( fib_2(3) + " | " );
    document.write( fib_2(7) + " | " );
    document.write( fib_2(77) );
  </script>



  <!-- Пробное чтоб посмотреть рекурсию -->
  <script type="text/javascript">
      function countdown(i) {
        console.log(i);
        if (i <= 1) return;
        else {
          countdown(i - 1);
        }
      }

      countdown(5);

  </script>



  <h1>2.20. Именованные функциональные выражения</h1>
  <h3>Task 2.20.1: </h3>
  <pre>
    <b>Посмотри в консоль</b>
  </pre>
  <h3>Решение</h3>
  <pre>
    'use strict';
    var test = function sayHi(name) {
    sayHi = "тест"; // попытка перезаписи
    document.write( sayHi ); // function... (перезапись не удалась)
    };

    test();
  </pre>
  <script type="text/javascript">
    'use strict';
    var test = function sayHi(name) {
    sayHi = "тест"; // попытка перезаписи
    document.write( sayHi ); // function... (перезапись не удалась)
    };

    test();
  </script>



  <h3>Task 2.20.2: </h3>
  <pre>
    Проверка на NFE

    Каков будет результат выполнения кода?

    function g() { return 1; }

    alert(g);

    А такого? Будет ли разница, если да – почему?

    (function g() { return 1; });

    alert(g);
  </pre>
  <h3>Решение</h3>
  <pre>
    'use strict';
    function g() {
      return 1;
    }

    var func = (function gg() {
      return 1;
    });

    document.write('Answer: ')
    document.write(g);
    document.write('< br>');
    document.write(gg);
    document.write('< br>');
    document.write(func);
  </pre>
  <script type="text/javascript">
    'use strict';
    function g() {
      return 1;
    }

    var func = (function gg() {
      return 1;
    });

    document.write('Answer: ')
    document.write(g);
    document.write('<br>');
    document.write(gg);
    document.write('<br>');
    document.write(func);
  </script>







  <br />
  <br>
  <br>
</body>
</html>
